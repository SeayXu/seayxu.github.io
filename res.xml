<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[SeayXu git blog]]></title>
  
  <link href="/res.xml" rel="self"/>
  <link href="http://git.seay.me/"/>
  <updated>2016-01-20T16:26:28.717Z</updated>
  <id>http://git.seay.me/</id>
  
  <author>
    <name><![CDATA[SeayXu]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[ASP.NET 5 已死 隆重介绍 ASP.NET Core 1.0 和 .NET Core 1.0]]></title>
    <link href="http://git.seay.me/post/2016-01-20-ASP-NET-5-Is-Dead-Introducing-ASP-NET-Core-1-0-And-NET-Core-1-0.html"/>
    <id>http://git.seay.me/post/2016-01-20-ASP-NET-5-Is-Dead-Introducing-ASP-NET-Core-1-0-And-NET-Core-1-0.html</id>
    <published>2016-01-20T15:43:30.000Z</published>
    <updated>2016-01-20T16:26:28.717Z</updated>
    <content type="html"><![CDATA[<h1 id="u7F18_u7531"><a href="#u7F18_u7531" class="headerlink" title="缘由"></a>缘由</h1><p>  晚上回来就看到有博文说<code>ASP.NET 5</code>已死,其来源出自于<a href="http://www.hanselman.com/blog/ASPNET5IsDeadIntroducingASPNETCore10AndNETCore10.aspx" target="_blank" rel="external">Scott Hanselman</a>的博客，下面是原文。</p>
<h1 id="u4E2A_u4EBA_u89C2_u70B9_uFF1A"><a href="#u4E2A_u4EBA_u89C2_u70B9_uFF1A" class="headerlink" title="个人观点："></a>个人观点：</h1><blockquote>
<ol>
<li><p>命名：由于现在<code>asp.net</code>已开源，并支持跨平台,这是一种新的实现，而且和<code>asp.net 4.6</code>是并行关系，不是在4.6的基础上升级，所以不应该沿用之前的命名。</p>
</li>
<li><p>已死：由于<code>asp.net 5</code>是一种新的实现，不是原来版本的升级，已重命名，所以说，<code>asp.net 5</code>算是死了。不过，还是有些人习惯叫<code>asp.net 5</code>。</p>
</li>
</ol>
</blockquote>
<h1 id="u539F_u6587"><a href="#u539F_u6587" class="headerlink" title="原文"></a>原文</h1><p><strong> Naming is hard. </strong></p>
<blockquote>
<p>There are only two hard things in Computer Science: cache invalidation and naming things. - Phil Karlton</p>
</blockquote>
<p>  It’s very easy to armchair quarterback and say that “they should have named it Foo and it would be easy” but very often there’s many players involved in naming things. ASP.NET is a good ‘brand’ that’s been around for 15 years or so. ASP.NET 4.6 is a supported and released product that you can get and use now from <a href="http://get.asp.net" target="_blank" rel="external">http://get.asp.net</a>.</p>
<p>  However, naming the new, completely written from scratch ASP.NET framework “ASP.NET 5” was a bad idea for a one major reason: 5 &gt; 4.6 makes it seem like ASP.NET 5 is bigger, better, and replaces ASP.NET 4.6. Not so.</p>
<p>  So we’re changing the name and picking a better version number.</p>
<p><strong> REINTRODUCING ASP.NET CORE 1.0 AND .NET CORE 1.0 </strong></p>
<ul>
<li><p>ASP.NET 5 is now ASP.NET Core 1.0.</p>
</li>
<li><p>.NET Core 5 is now .NET Core 1.0.</p>
</li>
<li><p>Entity Framework 7 is now Entity Framework Core 1.0 or EF Core 1.0 colloquially.</p>
<p>Why 1.0? Because these are new. The whole .NET Core concept is new. The <a href="http://www.hanselman.com/blog/ExploringTheNewNETDotnetCommandLineInterfaceCLI.aspx" target="_blank" rel="external">.NET Core 1.0 CLI</a> is very new. Not only that, but .NET Core isn’t as complete as the full .NET Framework 4.6. We’re still exploring server-side graphics libraries. We’re still exploring gaps between ASP.NET 4.6 and ASP.NET Core 1.0.</p>
<p><img src="http://www.hanselman.com/blog/content/binary/Windows-Live-Writer/Reintroducing-ASP.NET-Core-1.0-and-.NE.0_B840/image_0e978596-bd85-42ed-8d27-c16e119bca5d.png" alt=""></p>
</li>
</ul>
<p><strong> WHICH TO CHOOSE? </strong></p>
<p>  To be clear, ASP.NET 4.6 is the more mature platform. It’s battle-tested and released and available today. ASP.NET Core 1.0 is a 1.0 release that includes Web API and MVC but doesn’t yet have SignalR or Web Pages. It doesn’t yet support VB or F#. It will have these subsystems some day but not today.</p>
<p>  We don’t want anyone to think that ASP.NET Core 1.0 is the finish line. It’s a new beginning and a fork in the road, but ASP.NET 4.6 continues on, released and fully supported. There’s lots of great stuff coming, stay tuned!</p>
<hr>
<h1 id="u8BD1_u6587"><a href="#u8BD1_u6587" class="headerlink" title="译文"></a>译文</h1><p><strong> 起名真难 </strong></p>
<blockquote>
<p>计算机科学中只有两件难事：缓存失效和命名。——Phil Karlton</p>
</blockquote>
<p>  “他们就该给它起个名字叫Foo，多简单的事” 纸上谈兵说说很容易，但是起名字这件事经常牵扯到很多因素。ASP.NET 作为一个好“牌子”已经有15年了。ASP.NET 4.6是一个受支持的已发布产品，你可以在 <a href="https://get.asp.net" target="_blank" rel="external">https://get.asp.net</a> 获取。</p>
<p>  然而，把一个全新的、完全重写的ASP.NET框架命名为 “ASP.NET 5” 不是一个好主意，一个主要原因就是：5 &gt; 4.6 让人觉得 ASP.NET 5 更大、更好，是取代ASP.NET 4.6的。并不是。</p>
<p>  所以我们重新命名并选了一个更好的版本号。</p>
<p><strong> 隆重介绍 ASP.NET Core 1.0 和 .NET Core 1.0 </strong></p>
<ul>
<li>ASP.NET 5 现在叫做 ASP.NET Core 1.0</li>
<li>.NET Core 现在叫做 .NET Core 1.0</li>
<li><p>Entity Framework 7 现在叫做 Entity Framework Core 1.0 或者简称 EF Core 1.0</p>
<p>为什么选1.0？因为它们是全新的。整个.NET Core概念就是全新的。.NET Core CLI 是非常新的东西。（译注：.Net Core Command Line Interface ，将取代DNX）</p>
<p>不仅如此，.NET Core还不像.NET Framework 4.6那样完整。我们仍在完善服务端图形库(server-side grahpics libraries)，我们仍在填补ASP.NET Core 1.0和ASP.NET 4.6之间的缺口。</p>
<p><img src="http://www.hanselman.com/blog/content/binary/Windows-Live-Writer/Reintroducing-ASP.NET-Core-1.0-and-.NE.0_B840/image_0e978596-bd85-42ed-8d27-c16e119bca5d.png" alt=""></p>
</li>
</ul>
<p><strong> 如何选择？ </strong></p>
<p>  明确一下，ASP.NET 4.6是更成熟的平台。是经过实战（battle-tested）的目前已发布的可以用版本。</p>
<p>  ASP.NET Core 1.0则是1.0版本，包括了Web API和MVC，但不包括SinglR和Web Pages。目前还不支持VB和F#。这些都会在将来实现，但目前还没有。</p>
<p>  我们不想让人认为ASP.NET Core 1.0是个终点线，它是一个新的起点和新的分支。</p>
<p>  ASP.NET 4.6将继续前行，发布并全面受到支持。别走开，更多精彩内容即将呈现。</p>
<p>FROM:<a href="http://www.hanselman.com/blog/ASPNET5IsDeadIntroducingASPNETCore10AndNETCore10.aspx" target="_blank" rel="external">Scott Hanselman Blog</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="u7F18_u7531"><a href="#u7F18_u7531" class="headerlink" title="缘由"></a>缘由</h1><p>  晚上回来就看到有博文说<code>ASP.NET 5</code>已死,其来源出自于<a href=]]>
    </summary>
    
      <category term="ASP.NET" scheme="http://git.seay.me/tags/ASP-NET/"/>
    
      <category term="ASP.NET 5" scheme="http://git.seay.me/tags/ASP-NET-5/"/>
    
      <category term="ASP.NET Core" scheme="http://git.seay.me/tags/ASP-NET-Core/"/>
    
      <category term="NET Core" scheme="http://git.seay.me/tags/NET-Core/"/>
    
      <category term=".NET" scheme="http://git.seay.me/categories/NET/"/>
    
      <category term="ASP.NET" scheme="http://git.seay.me/categories/NET/ASP-NET/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[转载--MySQL开发规范(二)]]></title>
    <link href="http://git.seay.me/post/2016-01-20-MySQL-Development-Specification-02.html"/>
    <id>http://git.seay.me/post/2016-01-20-MySQL-Development-Specification-02.html</id>
    <published>2016-01-20T03:03:20.000Z</published>
    <updated>2016-01-20T03:33:26.098Z</updated>
    <content type="html"><![CDATA[<p><strong> MYSQL数据库命名及设计规范 </strong></p>
<h1 id="1-_u8BBE_u8BA1_u539F_u5219"><a href="#1-_u8BBE_u8BA1_u539F_u5219" class="headerlink" title="1.设计原则"></a>1.设计原则</h1><h2 id="1_29__u6807_u51C6_u5316_u548C_u89C4_u8303_u5316"><a href="#1_29__u6807_u51C6_u5316_u548C_u89C4_u8303_u5316" class="headerlink" title="1) 标准化和规范化"></a>1) 标准化和规范化</h2><pre><code>数据的标准化有助于消除数据库中的数据冗余。标准化有好几种形式，但Third Normal Form（3NF）通常被认为在性能、扩展性和数据完整性方面达到了最好平衡。简单来说，遵守3NF 标准的数据库的表设计原则是：“One Fact in One Place”即某个表只包括其本身基本的属性，当不是它们本身所具有的属性时需进行分解。表之间的关系通过外键相连接。它具有以下特点：有一组表专门存放通过键连接起来的关联数据。

举例：某个存放客户及其有关定单的3NF 数据库就可能有两个表：Customer和Order。Order表不包含定单关联客户的任何信息，但表内会存放一个键值，该键指向Customer表里包含该客户信息的那一行。

事实上，为了效率的缘故，对表不进行标准化有时也是必要的。
</code></pre><h2 id="2_29__u6570_u636E_u9A71_u52A8"><a href="#2_29__u6570_u636E_u9A71_u52A8" class="headerlink" title="2) 数据驱动"></a>2) 数据驱动</h2><pre><code>采用数据驱动而非硬编码的方式，许多策略变更和维护都会方便得多，大大增强系统的灵活性和扩展性。

举例，假如用户界面要访问外部数据源（文件、XML 文档、其他数据库等），不妨把相应的连接和路径信息存储在用户界面支持表里。还有，如果用户界面执行工作流之类的任务（发送邮件、打印信笺、修改记录状态等），那么产生工作流的数据也可以存放在数据库里。角色权限管理也可以通过数据驱动来完成。事实上，如果过程是数据驱动的，你就可以把相当大的责任推给用户，由用户来维护自己的工作流过程。
</code></pre><h2 id="3_29__u8003_u8651_u5404_u79CD_u53D8_u5316"><a href="#3_29__u8003_u8651_u5404_u79CD_u53D8_u5316" class="headerlink" title="3) 考虑各种变化"></a>3) 考虑各种变化</h2><pre><code>在设计数据库的时候考虑到哪些数据字段将来可能会发生变更。

举例，姓氏就是如此（注意是西方人的姓氏，比如女性结婚后从夫姓等）。所以，在建立系统存储客户信息时，在单独的一个数据表里存储姓氏字段，而且还附加起始日和终止日等字段，这样就可以跟踪这一数据条目的变化。
</code></pre><h1 id="2-_u6570_u636E_u5E93_u6D89_u53CA_u5B57_u7B26_u89C4_u8303"><a href="#2-_u6570_u636E_u5E93_u6D89_u53CA_u5B57_u7B26_u89C4_u8303" class="headerlink" title="2.数据库涉及字符规范"></a>2.数据库涉及字符规范</h1><p>  采用26个英文字母(区分大小写)和0-9这十个自然数,加上下划线’_’组成,共63个字符.不能出现其他字符(注释除外).</p>
<p>  注意事项:</p>
<pre><code>1) 以上命名都不得超过30个字符的系统限制.变量名的长度限制为29(不包括标识字符@).

2) 数据对象、变量的命名都采用英文字符,禁止使用中文命名.绝对不要在对象名的字符之间留空格.

3) 小心保留词,要保证你的字段名没有和保留词、数据库系统或者常用访问方法冲突

4) 保持字段名和类型的一致性,在命名字段并为其指定数据类型的时候一定要保证一致性.假如数据类型在一个表里是整数,那在另一个表里可就别变成字符型了.
</code></pre><h1 id="3-_u6570_u636E_u5E93_u547D_u540D_u89C4_u8303"><a href="#3-_u6570_u636E_u5E93_u547D_u540D_u89C4_u8303" class="headerlink" title="3.数据库命名规范"></a>3.数据库命名规范</h1><p>  数据库,数据表一律使用前缀</p>
<p>  正式数据库名使用小写英文以及下划线组成,尽量说明是那个应用或者系统在使用的.比如:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web_19floor_net&#10;&#10;web_car</span><br></pre></td></tr></table></figure>
<p>  备份数据库名使用正式库名加上备份时间组成,如:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web_19floor_net_20070403&#10;&#10;web_car_20070403</span><br></pre></td></tr></table></figure>
<h1 id="4-_u6570_u636E_u5E93_u8868_u547D_u540D_u89C4_u8303"><a href="#4-_u6570_u636E_u5E93_u8868_u547D_u540D_u89C4_u8303" class="headerlink" title="4.数据库表命名规范"></a>4.数据库表命名规范</h1><p>  数据表名使用小写英文以及下划线组成,尽量说明是那个应用或者系统在使用的.</p>
<p>  相关应用的数据表使用同一前缀,如论坛的表使用cdb<em>前缀,博客的数据表使用supe</em>前缀,前缀名称一般不超过5字</p>
<p>  比如:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web_user&#10;&#10;web_group&#10;&#10;supe_userspace</span><br></pre></td></tr></table></figure>
<p>  备份数据表名使用正式表名加上备份时间组成,如:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web_user_20070403&#10;&#10;web_group_20070403&#10;&#10;supe_userspace_20070403</span><br></pre></td></tr></table></figure>
<h1 id="5-_u5B57_u6BB5_u547D_u540D_u89C4_u8303"><a href="#5-_u5B57_u6BB5_u547D_u540D_u89C4_u8303" class="headerlink" title="5.字段命名规范"></a>5.字段命名规范</h1><p>  字段名称使用单词组合完成,首字母小写,后面单词的首字母大写,最好是带表名前缀.</p>
<p>  如<code>web_user</code>表的字段:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userId&#10;&#10;userName&#10;&#10;userPassword</span><br></pre></td></tr></table></figure>
<p>  表与表之间的相关联字段要用统一名称</p>
<p>  如<code>web_user</code>表里面的<code>userId</code>和<code>web_group</code>表里面的<code>userId</code>相对应</p>
<h1 id="6-_u5B57_u6BB5_u7C7B_u578B_u89C4_u8303"><a href="#6-_u5B57_u6BB5_u7C7B_u578B_u89C4_u8303" class="headerlink" title="6.字段类型规范"></a>6.字段类型规范</h1><pre><code>规则:用尽量少的存储空间来存数一个字段的数据.

比如能用int的就不用char或者varchar

能用tinyint的就不用int

能用varchar(20)的就不用varchar(255)

时间戳字段尽量用int型，如created:表示从&apos;1970-01-01 08:00:00&apos;开始的int秒数，采用英文单词的过去式；gmtCreated:表示datetime类型的时间，即形如&apos;1980-01-01 00:00:00&apos;的时间串，Java中对应的类型为Timestamp
</code></pre><h1 id="7-_u6570_u636E_u5E93_u8BBE_u8BA1_u6587_u6863_u89C4_u8303"><a href="#7-_u6570_u636E_u5E93_u8BBE_u8BA1_u6587_u6863_u89C4_u8303" class="headerlink" title="7.数据库设计文档规范"></a>7.数据库设计文档规范</h1><p>  所有数据库设计要写成文档,文档以模块化形式表达.大致格式如下：</p>
<pre><code>&apos;-------------------------------------------
&apos;    表名：    web_user
&apos;    作者：    Aeolus(傻鱼)
&apos;    日期：    2007-04-11
&apos;    版本：    1.0
&apos;    描述：    保存用户资料
&apos;    具体内容：
&apos;    UserID  int,自动增量  用户代码
&apos;    UserName char(12)  用户名字
&apos;    ......
&apos;--------------------------------------------
</code></pre><h1 id="8-_u7D22_u5F15_u4F7F_u7528_u539F_u5219_uFF1A"><a href="#8-_u7D22_u5F15_u4F7F_u7528_u539F_u5219_uFF1A" class="headerlink" title="8.索引使用原则："></a>8.索引使用原则：</h1><pre><code>1) 逻辑主键使用唯一的成组索引,对系统键(作为存储过程)采用唯一的非成组索引,对任何外键列采用非成组索引.考虑数据库的空间有多大,表如何进行访问,还有这些访问是否主要用作读写.

2) 大多数数据库都索引自动创建的主键字段,但是可别忘了索引外键,它们也是经常使用的键,比如运行查询显示主表和所有关联表的某条记录就用得上.

3) 不要索引blob/text等字段,不要索引大型字段(有很多字符),这样作会让索引占用太多的存储空间.

4) 不要索引常用的小型表

  不要为小型数据表设置任何键,假如它们经常有插入和删除操作就更别这样作了.对这些插入和删除操作的索引维护可能比扫描表空间消耗更多的时间.
</code></pre><h1 id="9-sql_u8BED_u53E5_u89C4_u8303"><a href="#9-sql_u8BED_u53E5_u89C4_u8303" class="headerlink" title="9.sql语句规范"></a>9.sql语句规范</h1><p>  所有sql关键词全部大写,比如SELECT,UPDATE,FROM,ORDER,BY等,所有的表名和库名都要用``包含<br>  如:<br>    <code>SELECT COUNT(*) FROM `cdb_members` WHERE `userName` = &#39;aeolus&#39;;</code></p>
<h1 id="10-_u5176_u4ED6_u8BBE_u8BA1_u6280_u5DE7"><a href="#10-_u5176_u4ED6_u8BBE_u8BA1_u6280_u5DE7" class="headerlink" title="10.其他设计技巧"></a>10.其他设计技巧</h1><p>  1) 避免使用触发器</p>
<pre><code>触发器的功能通常可以用其他方式实现.在调试程序时触发器可能成为干扰.假如你确实需要采用触发器,你最好集中对它文档化.
</code></pre><p>  2) 使用常用英语(或者其他任何语言)而不要使用编码或者拼音首字母缩写</p>
<pre><code>在创建下拉菜单、列表、报表时最好按照英语名排序.假如需要编码或者拼音首字母缩写,可以在旁边附上用户知道的英语.
</code></pre><p>  3) 保存常用信息</p>
<pre><code>让一个表专门存放一般数据库信息非常有用.在这个表里存放数据库当前版本、最近检查/修复(对Access)、关联设计文档的名称、客户等信息.这样可以实现一种简单机制跟踪数据库,当客户抱怨他们的数据库没有达到希望的要求而与你联系时,这样做对非客户机/服务器环境特别有用.
</code></pre><p>  4) 包含版本机制</p>
<pre><code>在数据库中引入版本控制机制来确定使用中的数据库的版本.时间一长,用户的需求总是会改变的.最终可能会要求修改数据库结构.把版本信息直接存放到数据库中更为方便.
</code></pre><p>  5) 编制文档</p>
<pre><code>对所有的快捷方式、命名规范、限制和函数都要编制文档.

采用给表、列、触发器等加注释的数据库工具.对开发、支持和跟踪修改非常有用.

对数据库文档化,或者在数据库自身的内部或者单独建立文档.这样,当过了一年多时间后再回过头来做第2 个版本,犯错的机会将大大减少.
</code></pre><p>  6) 测试、测试、反复测试</p>
<pre><code>建立或者修订数据库之后,必须用用户新输入的数据测试数据字段.最重要的是,让用户进行测试并且同用户一道保证选择的数据类型满足商业要求.测试需要在把新数据库投入实际服务之前完成.
</code></pre><p>  7) 检查设计</p>
<pre><code>在开发期间检查数据库设计的常用技术是通过其所支持的应用程序原型检查数据库.换句话说,针对每一种最终表达数据的原型应用,保证你检查了数据模型并且查看如何取出数据.
</code></pre><blockquote>
<p>来自：<a href="http://www.phpboke.com/mysql-fuifan.html" target="_blank" rel="external">http://www.phpboke.com/mysql-fuifan.html</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p><strong> MYSQL数据库命名及设计规范 </strong></p>
<h1 id="1-_u8BBE_u8BA1_u539F_u5219"><a href="#1-_u8BBE_u8BA1_u539F_u5219" class="headerlink" title]]>
    </summary>
    
      <category term="Database" scheme="http://git.seay.me/tags/Database/"/>
    
      <category term="MySQL" scheme="http://git.seay.me/tags/MySQL/"/>
    
      <category term="数据库" scheme="http://git.seay.me/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="Database" scheme="http://git.seay.me/categories/Database/"/>
    
      <category term="MySQL" scheme="http://git.seay.me/categories/Database/MySQL/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[转载--MySQL开发规范(一)]]></title>
    <link href="http://git.seay.me/post/2016-01-20-MySQL-Development-Specification-01.html"/>
    <id>http://git.seay.me/post/2016-01-20-MySQL-Development-Specification-01.html</id>
    <published>2016-01-20T02:16:20.000Z</published>
    <updated>2016-01-20T02:46:51.958Z</updated>
    <content type="html"><![CDATA[<h1 id="u4E00_u3001__u8868_u8BBE_u8BA1"><a href="#u4E00_u3001__u8868_u8BBE_u8BA1" class="headerlink" title="一、 表设计"></a>一、 表设计</h1><p>  库名、表名、字段名必须使用小写字母，“_”分割。</p>
<p>  库名、表名、字段名必须不超过12个字符。</p>
<p>  库名、表名、字段名见名知意,建议使用名词而不是动词。</p>
<p>  建议使用InnoDB存储引擎。</p>
<p>  存储精确浮点数必须使用DECIMAL替代FLOAT和DOUBLE。</p>
<p>  建议使用UNSIGNED存储非负数值。</p>
<p>  建议使用INT UNSIGNED存储IPV4。</p>
<p>  整形定义中不添加长度，比如使用INT，而不是INT(4)。</p>
<p>  使用短数据类型，比如取值范围为0-80时，使用TINYINT UNSIGNED。</p>
<p>  不建议使用ENUM类型，使用TINYINT来代替。</p>
<p>  尽可能不使用TEXT、BLOB类型。</p>
<p>  VARCHAR(N)，N表示的是字符数不是字节数，比如VARCHAR(255)，可以最大可存储255个汉字，需要根据实际的宽度来选择N。</p>
<p>  VARCHAR(N)，N尽可能小，因为MySQL一个表中所有的VARCHAR字段最大长度是65535个字节，进行排序和创建临时表一类的内存操作时，会使用N的长度申请内存。</p>
<p>  表字符集选择UTF8。</p>
<p>  使用VARBINARY存储变长字符串。</p>
<p>  存储年使用YEAR类型。</p>
<p>  存储日期使用DATE类型。</p>
<p>  存储时间（精确到秒）建议使用TIMESTAMP类型，因为TIMESTAMP使用4字节，DATETIME使用8个字节。</p>
<p>  建议字段定义为NOT NULL。</p>
<p>  将过大字段拆分到其他表中。</p>
<p>  禁止在数据库中使用VARBINARY、BLOB存储图片、文件等。</p>
<p>  表结构变更需要通知DBA审核。</p>
<h1 id="u4E8C_u3001__u7D22_u5F15"><a href="#u4E8C_u3001__u7D22_u5F15" class="headerlink" title="二、 索引"></a>二、 索引</h1><p>  非唯一索引必须按照“idx<em>字段名称</em>字段名称[_字段名]”进行命名。</p>
<p>  唯一索引必须按照“uniq<em>字段名称</em>字段名称[_字段名]”进行命名。</p>
<p>  索引名称必须使用小写。</p>
<p>  索引中的字段数建议不超过5个。</p>
<p>  单张表的索引数量控制在5个以内。</p>
<p>  唯一键由3个以下字段组成，并且字段都是整形时，使用唯一键作为主键。</p>
<p>  没有唯一键或者唯一键不符合5中的条件时，使用自增（或者通过发号器获取）id作为主键。</p>
<p>  唯一键不和主键重复。</p>
<p>  索引字段的顺序需要考虑字段值去重之后的个数，个数多的放在前面。</p>
<p>  ORDER BY，GROUP BY，DISTINCT的字段需要添加在索引的后面。</p>
<p>  使用EXPLAIN判断SQL语句是否合理使用索引，尽量避免extra列出现：Using File Sort，Using Temporary。<br>  UPDATE、DELETE语句需要根据WHERE条件添加索引。</p>
<p>  不建议使用%前缀模糊查询，例如LIKE “%weibo”。</p>
<p>  对长度过长的VARCHAR字段建立索引时，添加crc32或者MD5 Hash字段，对Hash字段建立索引。</p>
<p>  合理创建联合索引（避免冗余），(a,b,c) 相当于 (a) 、(a,b) 、(a,b,c)。</p>
<p>  合理利用覆盖索引。</p>
<p>  SQL变更需要确认索引是否需要变更并通知DBA。</p>
<h1 id="u4E09_u3001_SQL_u8BED_u53E5"><a href="#u4E09_u3001_SQL_u8BED_u53E5" class="headerlink" title="三、 SQL语句"></a>三、 SQL语句</h1><p>  使用prepared statement，可以提供性能并且避免SQL注入。</p>
<p>  SQL语句中IN包含的值不应过多。</p>
<p>  UPDATE、DELETE语句不使用LIMIT。</p>
<p>  WHERE条件中必须使用合适的类型，避免MySQL进行隐式类型转化。</p>
<p>  SELECT语句只获取需要的字段。</p>
<p>  SELECT、INSERT语句必须显式的指明字段名称，不使用SELECT *，不使用INSERT INTO table()。</p>
<p>  使 用SELECT column_name1, column_name2 FROM table WHERE [condition]而不是SELECT column_name1 FROM table WHERE [condition]和SELECT column_name2 FROM table WHERE [condition]。</p>
<p>  WHERE条件中的非等值条件（IN、BETWEEN、&lt;、&lt;=、&gt;、&gt;=）会导致后面的条件使用不了索引。</p>
<p>  避免在SQL语句进行数学运算或者函数运算，容易将业务逻辑和DB耦合在一起。</p>
<p>  INSERT语句使用batch提交（INSERT INTO table VALUES(),(),()……），values的个数不应过多。</p>
<p>  避免使用存储过程、触发器、函数等，容易将业务逻辑和DB耦合在一起，并且MySQL的存储过程、触发器、函数中存在一定的bug。</p>
<p>  避免使用JOIN。</p>
<p>  使用合理的SQL语句减少与数据库的交互次数。</p>
<p>  不使用ORDER BY RAND()，使用其他方法替换。</p>
<p>  建议使用合理的分页方式以提高分页的效率。</p>
<p>  统计表中记录数时使用COUNT(*)，而不是COUNT(primary_key)和COUNT(1)。</p>
<p>  禁止在从库上执行后台管理和统计类型功能的QUERY。</p>
<h1 id="u56DB_u3001__u6563_u8868"><a href="#u56DB_u3001__u6563_u8868" class="headerlink" title="四、 散表"></a>四、 散表</h1><p>  每张表数据量建议控制在5000w以下。</p>
<p>  可以结合使用hash、range、lookup table进行散表。</p>
<p>  散表如果使用md5（或者类似的hash算法）进行散表，表名后缀使用16进制，比如user_ff。</p>
<p>  推荐使用CRC32求余（或者类似的算术算法）进行散表，表名后缀使用数字，数字必须从0开始并等宽，比如散100张表，后缀从00-99。</p>
<p>  使用时间散表，表名后缀必须使用特定格式，比如按日散表user_20110209、按月散表user_201102。</p>
<h1 id="u4E94_u3001__u5176_u4ED6"><a href="#u4E94_u3001__u5176_u4ED6" class="headerlink" title="五、 其他"></a>五、 其他</h1><p>  批量导入、导出数据需要DBA进行审查，并在执行过程中观察服务。</p>
<p>  批量更新数据，如update,delete 操作，需要DBA进行审查，并在执行过程中观察服务。</p>
<p>  产品出现非数据库平台运维导致的问题和故障时，如前端被抓站，请及时通知DBA，便于维护服务稳定。</p>
<p>  业务部门程序出现bug等影响数据库服务的问题,请及时通知DBA，便于维护服务稳定。</p>
<p>  业务部门推广活动，请提前通知DBA进行服务和访问评估。</p>
<p>  如果出现业务部门人为误操作导致数据丢失，需要恢复数据，请在第一时间通知DBA，并提供准确时间，误操作语句等重要线索。</p>
<hr>
<h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="1-1-_u5E93_u540D_u3001_u8868_u540D_u3001_u5B57_u6BB5_u540D_u5FC5_u987B_u4F7F_u7528_u5C0F_u5199_u5B57_u6BCD_uFF0C_u201C__u201D_u5206_u5272_u3002"><a href="#1-1-_u5E93_u540D_u3001_u8868_u540D_u3001_u5B57_u6BB5_u540D_u5FC5_u987B_u4F7F_u7528_u5C0F_u5199_u5B57_u6BCD_uFF0C_u201C__u201D_u5206_u5272_u3002" class="headerlink" title="1-1.库名、表名、字段名必须使用小写字母，“_”分割。"></a>1-1.库名、表名、字段名必须使用小写字母，“_”分割。</h2><p>  a) MySQL有配置参数lower_case_table_names，不可动态更改，linux系统默认为0，即库表名以实际情况存储，大小写敏感。如果是1，以小写存储，大小写不敏感。如果是2，以实际情况存储，但以小写比较。</p>
<p>  b) 如果大小写混合用，可能存在abc,Abc,ABC等多个表共存，容易导致混乱。</p>
<p>  c) 字段名显示区分大小写，但实际使用不区分，即不可以建立两个名字一样但大小写不一样的字段。</p>
<p>  d) 为了统一规范， 库名、表名、字段名使用小写字母。</p>
<h2 id="1-2-_u5E93_u540D_u3001_u8868_u540D_u3001_u5B57_u6BB5_u540D_u5FC5_u987B_u4E0D_u8D85_u8FC712_u4E2A_u5B57_u7B26_u3002"><a href="#1-2-_u5E93_u540D_u3001_u8868_u540D_u3001_u5B57_u6BB5_u540D_u5FC5_u987B_u4E0D_u8D85_u8FC712_u4E2A_u5B57_u7B26_u3002" class="headerlink" title="1-2.库名、表名、字段名必须不超过12个字符。"></a>1-2.库名、表名、字段名必须不超过12个字符。</h2><p>  库名、表名、字段名支持最多64个字符，但为了统一规范、易于辨识以及减少传输量，必须不超过12字符。</p>
<h2 id="1-3-_u5E93_u540D_u3001_u8868_u540D_u3001_u5B57_u6BB5_u540D_u89C1_u540D_u77E5_u610F_2C_u5EFA_u8BAE_u4F7F_u7528_u540D_u8BCD_u800C_u4E0D_u662F_u52A8_u8BCD_u3002"><a href="#1-3-_u5E93_u540D_u3001_u8868_u540D_u3001_u5B57_u6BB5_u540D_u89C1_u540D_u77E5_u610F_2C_u5EFA_u8BAE_u4F7F_u7528_u540D_u8BCD_u800C_u4E0D_u662F_u52A8_u8BCD_u3002" class="headerlink" title="1-3.库名、表名、字段名见名知意,建议使用名词而不是动词。"></a>1-3.库名、表名、字段名见名知意,建议使用名词而不是动词。</h2><p>  a) 用户评论可用表名usercomment或者comment。</p>
<p>  b) 库表是一种客观存在的事物，一种对象，所以建议使用名词。</p>
<h2 id="1-4-_u5EFA_u8BAE_u4F7F_u7528InnoDB_u5B58_u50A8_u5F15_u64CE_u3002"><a href="#1-4-_u5EFA_u8BAE_u4F7F_u7528InnoDB_u5B58_u50A8_u5F15_u64CE_u3002" class="headerlink" title="1-4.建议使用InnoDB存储引擎。"></a>1-4.建议使用InnoDB存储引擎。</h2><p>  a) 5.5以后的默认引擘，支持事务，行级锁，更好的恢复性，高并发下性能更好，对多核，大内存，ssd等硬件支持更好。</p>
<p>  b) 具体比较可见附件的官方白皮书。</p>
<h2 id="1-5-_u5B58_u50A8_u7CBE_u786E_u6D6E_u70B9_u6570_u5FC5_u987B_u4F7F_u7528DECIMAL_u66FF_u4EE3FLOAT_u548CDOUBLE_u3002"><a href="#1-5-_u5B58_u50A8_u7CBE_u786E_u6D6E_u70B9_u6570_u5FC5_u987B_u4F7F_u7528DECIMAL_u66FF_u4EE3FLOAT_u548CDOUBLE_u3002" class="headerlink" title="1-5.存储精确浮点数必须使用DECIMAL替代FLOAT和DOUBLE。"></a>1-5.存储精确浮点数必须使用DECIMAL替代FLOAT和DOUBLE。</h2><p>  a) mysql中的数值类型（不包括整型）：</p>
<pre><code>IEEE754浮点数： float  （单精度） ， double  或 real  （双精度）

定点数： decimal 或 numeric

单精度浮点数的有效数字二进制是24位，按十进制来说，是8位；

双精度浮点数的有效数字二进制是53位，按十进制来说，是16 位

一个实数的有效数字超过8位，用单精度浮点数来表示的话，就会产生误差！同样，如果一个实数的有效数字超过16位，用双精度浮点数来表示，也会产生误差
</code></pre><p>  b) IEEE754标准的计算机浮点数，在内部是用二进制表示的，但在将一个十进制数转换为二进制浮点数时，也会造成误差，原因是不是所有的数都能转换成有限长度的二进制数。<br>    即一个二进制可以准确转换成十进制，但一个带小数的十进制不一定能够准确地用二进制来表示。</p>
<p>  <strong> 实例： </strong><br>    <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="keyword">t</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">t</span>(<span class="keyword">value</span> <span class="built_in">float</span>(<span class="number">10</span>,<span class="number">2</span>));</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">t</span> <span class="keyword">values</span>(<span class="number">131072.67</span>),(<span class="number">131072.68</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">select</span>  <span class="keyword">value</span>  <span class="keyword">from</span> <span class="keyword">t</span>;</span></span><br><span class="line"></span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line"></span><br><span class="line">| value     |</span><br><span class="line"></span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line"></span><br><span class="line">| 131072.67 |</span><br><span class="line"></span><br><span class="line">| 131072.69 |</span><br><span class="line"></span><br><span class="line">+<span class="comment">-----------+</span></span><br></pre></td></tr></table></figure></p>
<h2 id="1-6-_u5EFA_u8BAE_u4F7F_u7528UNSIGNED_u5B58_u50A8_u975E_u8D1F_u6570_u503C_u3002"><a href="#1-6-_u5EFA_u8BAE_u4F7F_u7528UNSIGNED_u5B58_u50A8_u975E_u8D1F_u6570_u503C_u3002" class="headerlink" title="1-6.建议使用UNSIGNED存储非负数值。"></a>1-6.建议使用UNSIGNED存储非负数值。</h2><p>  同样的字节数，存储的数值范围更大。如tinyint 有符号为 -128-127，无符号为0-255</p>
<h2 id="1-7-__u5982_u4F55_u4F7F_u7528INT_UNSIGNED_u5B58_u50A8ip_uFF1F"><a href="#1-7-__u5982_u4F55_u4F7F_u7528INT_UNSIGNED_u5B58_u50A8ip_uFF1F" class="headerlink" title="1-7. 如何使用INT UNSIGNED存储ip？"></a>1-7. 如何使用INT UNSIGNED存储ip？</h2><p>  使用INT UNSIGNED而不是char(15)来存储ipv4地址，通过MySQL函数inet_ntoa和inet_aton来进行转化。Ipv6地址目前没有转化函数，需要使用DECIMAL或者两个bigINT来存储。</p>
<p>  例如：</p>
<pre><code><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">INET_ATON</span>(<span class="string">'209.207.224.40'</span>);</span></span><br><span class="line"></span><br><span class="line">3520061480</span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">SELECT</span> <span class="keyword">INET_NTOA</span>(<span class="number">3520061480</span>);</span></span><br><span class="line"></span><br><span class="line">209.207.224.40</span><br></pre></td></tr></table></figure>
</code></pre><h2 id="1-8-_INT_5BM_5D_uFF0CM_u503C_u4EE3_u8868_u4EC0_u4E48_u542B_u4E49_uFF1F"><a href="#1-8-_INT_5BM_5D_uFF0CM_u503C_u4EE3_u8868_u4EC0_u4E48_u542B_u4E49_uFF1F" class="headerlink" title="1-8. INT[M]，M值代表什么含义？"></a>1-8. INT[M]，M值代表什么含义？</h2><p>  注意数值类型括号后面的数字只是表示宽度而跟存储范围没有关系，比如INT(3)默认显示3位，空格补齐，超出时正常显示，python、java客户端等不具备这个功能。</p>
<h2 id="1-10-_u4E0D_u5EFA_u8BAE_u4F7F_u7528ENUM_u3001SET_u7C7B_u578B_uFF0C_u4F7F_u7528TINYINT_u6765_u4EE3_u66FF_u3002"><a href="#1-10-_u4E0D_u5EFA_u8BAE_u4F7F_u7528ENUM_u3001SET_u7C7B_u578B_uFF0C_u4F7F_u7528TINYINT_u6765_u4EE3_u66FF_u3002" class="headerlink" title="1-10.不建议使用ENUM、SET类型，使用TINYINT来代替。"></a>1-10.不建议使用ENUM、SET类型，使用TINYINT来代替。</h2><p>  a) ENUM，有三个问题：添加新的值要做DDL，默认值问题(将一个非法值插入ENUM(也就是说，允许的值列之外的字符串)，将插入空字符串以作为特殊错误值)，索引值问题（插入数字实际是插入索引对应的值）</p>
<p>  <strong> 实例： </strong></p>
<pre><code><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="keyword">t</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">t</span>(sex enum(<span class="string">'0'</span>,<span class="string">'1'</span>));</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">t</span> <span class="keyword">values</span>(<span class="number">1</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">t</span> <span class="keyword">values</span>(<span class="string">'3'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">t</span>;</span></span><br><span class="line"></span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line"></span><br><span class="line">| sex  |</span><br><span class="line"></span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line"></span><br><span class="line">| 0    |</span><br><span class="line"></span><br><span class="line">|      |</span><br><span class="line"></span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line"></span><br><span class="line">2 rows in <span class="operator"><span class="keyword">set</span> (<span class="number">0.00</span> sec)</span></span><br></pre></td></tr></table></figure>
</code></pre><h2 id="1-11-_u5C3D_u53EF_u80FD_u4E0D_u4F7F_u7528TEXT_u3001BLOB_u7C7B_u578B_u3002"><a href="#1-11-_u5C3D_u53EF_u80FD_u4E0D_u4F7F_u7528TEXT_u3001BLOB_u7C7B_u578B_u3002" class="headerlink" title="1-11.尽可能不使用TEXT、BLOB类型。"></a>1-11.尽可能不使用TEXT、BLOB类型。</h2><p>  a) 索引排序问题，只能使用max_sort_length的长度或者手工指定ORDER BY SUBSTRING(column, length)的长度来排序</p>
<p>  b) Memory引擘不支持text,blog类型，会在磁盘上生成临时表</p>
<p>  c) 可能浪费更多的空间</p>
<p>  d) 可能无法使用 <code>adaptive hash index</code></p>
<p>  e) 导致使用where没有索引的语句变慢</p>
<h2 id="1-13-_VARCHAR_u4E2D_u4F1A_u4EA7_u751F_u989D_u5916_u5B58_u50A8_u5417_uFF1F"><a href="#1-13-_VARCHAR_u4E2D_u4F1A_u4EA7_u751F_u989D_u5916_u5B58_u50A8_u5417_uFF1F" class="headerlink" title="1-13. VARCHAR中会产生额外存储吗？"></a>1-13. VARCHAR中会产生额外存储吗？</h2><p>  <code>VARCHAR(M)</code>，如果M<256时会使用一个字节来存储长度，如果m>=256则使用两个字节来存储长度。</256时会使用一个字节来存储长度，如果m></p>
<h2 id="1-14-_u8868_u5B57_u7B26_u96C6_u9009_u62E9UTF8_u3002"><a href="#1-14-_u8868_u5B57_u7B26_u96C6_u9009_u62E9UTF8_u3002" class="headerlink" title="1-14.表字符集选择UTF8。"></a>1-14.表字符集选择UTF8。</h2><p>  a) 使用utf8字符集，如果是汉字，占3个字节，但ASCII码字符还是1个字节。</p>
<p>  b) 统一，不会有转换产生乱码风险</p>
<p>  c) 其他地区的用户（美国、印度、台湾）无需安装简体中文支持，就能正常看您的文字，并且不会出现乱码</p>
<p>  d) ISO-8859-1编码(latin1)使用了单字节内的所有空间，在支持ISO-8859-1的系统中传输和存储其他任何编码的字节流都不会被抛弃。即把其他任何编码的字节流当作ISO-8859-1编码看待都没有问题，保存的是原封不动的字节流。</p>
<h2 id="1-15-_u4F7F_u7528VARBINARY_u5B58_u50A8_u53D8_u957F_u5B57_u7B26_u4E32_u3002"><a href="#1-15-_u4F7F_u7528VARBINARY_u5B58_u50A8_u53D8_u957F_u5B57_u7B26_u4E32_u3002" class="headerlink" title="1-15.使用VARBINARY存储变长字符串。"></a>1-15.使用VARBINARY存储变长字符串。</h2><p>  二进制字节流，不存在编码问题</p>
<h2 id="1-18-__u4E3A_u4EC0_u4E48_u5EFA_u8BAE_u4F7F_u7528TIMESTAMP_u6765_u5B58_u50A8_u65F6_u95F4_u800C_u4E0D_u662FDATETIME_uFF1F"><a href="#1-18-__u4E3A_u4EC0_u4E48_u5EFA_u8BAE_u4F7F_u7528TIMESTAMP_u6765_u5B58_u50A8_u65F6_u95F4_u800C_u4E0D_u662FDATETIME_uFF1F" class="headerlink" title="1-18. 为什么建议使用TIMESTAMP来存储时间而不是DATETIME？"></a>1-18. 为什么建议使用TIMESTAMP来存储时间而不是DATETIME？</h2><p>  DATETIME和TIMESTAMP都是精确到秒，优先选择TIMESTAMP，因为TIMESTAMP只有4个字节，而DATETIME8个字节。同时TIMESTAMP具有自动赋值以及自动更新的特性。</p>
<p>  如何使用TIMESTAMP的自动赋值属性？</p>
<pre><code>a)  将当前时间作为ts的默认值：ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP。

b)  当行更新时，更新ts的值：ts TIMESTAMP DEFAULT 0 ON UPDATE CURRENT_TIMESTAMP。

c)  可以将1和2结合起来：ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP。
</code></pre><h2 id="1-19-_u5EFA_u8BAE_u5B57_u6BB5_u5B9A_u4E49_u4E3ANOT_NULL_u3002"><a href="#1-19-_u5EFA_u8BAE_u5B57_u6BB5_u5B9A_u4E49_u4E3ANOT_NULL_u3002" class="headerlink" title="1-19.建议字段定义为NOT NULL。"></a>1-19.建议字段定义为NOT NULL。</h2><p>  a）如果null字段被索引，需要额外的1字节</p>
<p>  b）使索引，索引统计，值的比较变得更复杂</p>
<p>  c）可用0，’’代替</p>
<p>  d）如果是索引字段，一定要定义为not null</p>
<h2 id="1-21-_u7981_u6B62_u5728_u6570_u636E_u5E93_u4E2D_u4F7F_u7528VARBINARY_u3001BLOB_u5B58_u50A8_u56FE_u7247_u3001_u6587_u4EF6_u7B49_u3002"><a href="#1-21-_u7981_u6B62_u5728_u6570_u636E_u5E93_u4E2D_u4F7F_u7528VARBINARY_u3001BLOB_u5B58_u50A8_u56FE_u7247_u3001_u6587_u4EF6_u7B49_u3002" class="headerlink" title="1-21.禁止在数据库中使用VARBINARY、BLOB存储图片、文件等。"></a>1-21.禁止在数据库中使用VARBINARY、BLOB存储图片、文件等。</h2><p>  采用分布式文件系统更高效</p>
<h2 id="2-__u4E3A_u4EC0_u4E48MySQL_u7684_u6027_u80FD_u4F9D_u8D56_u4E8E_u7D22_u5F15_uFF1F"><a href="#2-__u4E3A_u4EC0_u4E48MySQL_u7684_u6027_u80FD_u4F9D_u8D56_u4E8E_u7D22_u5F15_uFF1F" class="headerlink" title="2. 为什么MySQL的性能依赖于索引？"></a>2. 为什么MySQL的性能依赖于索引？</h2><p>  MySQL的查询速度依赖良好的索引设计，因此索引对于高性能至关重要。合理的索引会加快查询速度（包括UPDATE和DELETE的速度，MySQL会将包含该行的page加载到内存中，然后进行UPDATE或者DELETE操作），不合理的索引会降低速度。</p>
<p>  MySQL索引查找类似于新华字典的拼音和部首查找，当拼音和部首索引不存在时，只能通过一页一页的翻页来查找。当MySQL查询不能使用索引时，MySQL会进行全表扫描，会消耗大量的IO。</p>
<h2 id="2-5-__u4E3A_u4EC0_u4E48_u4E00_u5F20_u8868_u4E2D_u4E0D_u80FD_u5B58_u5728_u8FC7_u591A_u7684_u7D22_u5F15_uFF1F"><a href="#2-5-__u4E3A_u4EC0_u4E48_u4E00_u5F20_u8868_u4E2D_u4E0D_u80FD_u5B58_u5728_u8FC7_u591A_u7684_u7D22_u5F15_uFF1F" class="headerlink" title="2-5. 为什么一张表中不能存在过多的索引？"></a>2-5. 为什么一张表中不能存在过多的索引？</h2><p>  InnoDB的secondary index使用b+tree来存储，因此在UPDATE、DELETE、INSERT的时候需要对b+tree进行调整，过多的索引会减慢更新的速度。</p>
<h2 id="2-11-_EXPLAIN_u8BED_u53E5"><a href="#2-11-_EXPLAIN_u8BED_u53E5" class="headerlink" title="2-11. EXPLAIN语句"></a>2-11. EXPLAIN语句</h2><p>  EXPLAIN 语句（在MySQL客户端中执行）可以获得MySQL如何执行SELECT语句的信息。通过对SELECT语句执行EXPLAIN，可以知晓MySQL执 行该SELECT语句时是否使用了索引、全表扫描、临时表、排序等信息。尽量避免MySQL进行全表扫描、使用临时表、排序等。详见官方文档。</p>
<h2 id="2-13-_u4E0D_u5EFA_u8BAE_u4F7F_u7528_25_u524D_u7F00_u6A21_u7CCA_u67E5_u8BE2_uFF0C_u4F8B_u5982LIKE__u201C_25weibo_u201D_u3002"><a href="#2-13-_u4E0D_u5EFA_u8BAE_u4F7F_u7528_25_u524D_u7F00_u6A21_u7CCA_u67E5_u8BE2_uFF0C_u4F8B_u5982LIKE__u201C_25weibo_u201D_u3002" class="headerlink" title="2-13.不建议使用%前缀模糊查询，例如LIKE “%weibo”。"></a>2-13.不建议使用%前缀模糊查询，例如LIKE “%weibo”。</h2><p>  会导致全表扫描</p>
<h2 id="2-14-__u5982_u4F55_u5BF9_u957F_u5EA6_u5927_u4E8E50_u7684VARCHAR_u5B57_u6BB5_u5EFA_u7ACB_u7D22_u5F15_uFF1F"><a href="#2-14-__u5982_u4F55_u5BF9_u957F_u5EA6_u5927_u4E8E50_u7684VARCHAR_u5B57_u6BB5_u5EFA_u7ACB_u7D22_u5F15_uFF1F" class="headerlink" title="2-14. 如何对长度大于50的VARCHAR字段建立索引？"></a>2-14. 如何对长度大于50的VARCHAR字段建立索引？</h2><p>  下面的表增加一列url_crc32，然后对url_crc32建立索引，减少索引字段的长度，提高效率。</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">url</span>(</span><br><span class="line"></span><br><span class="line">……</span><br><span class="line"></span><br><span class="line"><span class="keyword">url</span> <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">url_crc32 <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">……</span><br><span class="line"></span><br><span class="line"><span class="keyword">index</span> idx_url(url_crc32)</span><br><span class="line"></span><br><span class="line">)</span></span><br></pre></td></tr></table></figure>
<h2 id="2-16-__u4EC0_u4E48_u662F_u8986_u76D6_u7D22_u5F15_uFF1F"><a href="#2-16-__u4EC0_u4E48_u662F_u8986_u76D6_u7D22_u5F15_uFF1F" class="headerlink" title="2-16. 什么是覆盖索引？"></a>2-16. 什么是覆盖索引？</h2><p>  InnoDB 存储引擎中，secondary index（非主键索引）中没有直接存储行地址，存储主键值。如果用户需要查询secondary index中所不包含的数据列时，需要先通过secondary index查找到主键值，然后再通过主键查询到其他数据列，因此需要查询两次。</p>
<p>  覆盖索引的概念就是查询可以通过在一个索引中完成，覆盖索引效率会比较高，主键查询是天然的覆盖索引。</p>
<p>  合理的创建索引以及合理的使用查询语句，当使用到覆盖索引时可以获得性能提升。</p>
<p>  比如SELECT email,uid FROM user_email WHERE uid=xx，如果uid不是主键，适当时候可以将索引添加为index(uid,email)，以获得性能提升。</p>
<h2 id="3-3-UPDATE_u3001DELETE_u8BED_u53E5_u4E0D_u4F7F_u7528LIMIT_u3002"><a href="#3-3-UPDATE_u3001DELETE_u8BED_u53E5_u4E0D_u4F7F_u7528LIMIT_u3002" class="headerlink" title="3-3.UPDATE、DELETE语句不使用LIMIT。"></a>3-3.UPDATE、DELETE语句不使用LIMIT。</h2><p>  a) 可能导致主从数据不一致</p>
<p>  b) 会记录到错误日志，导致日志占用大量空间</p>
<h2 id="3-4-__u4E3A_u4EC0_u4E48_u9700_u8981_u907F_u514DMySQL_u8FDB_u884C_u9690_u5F0F_u7C7B_u578B_u8F6C_u5316_uFF1F"><a href="#3-4-__u4E3A_u4EC0_u4E48_u9700_u8981_u907F_u514DMySQL_u8FDB_u884C_u9690_u5F0F_u7C7B_u578B_u8F6C_u5316_uFF1F" class="headerlink" title="3-4. 为什么需要避免MySQL进行隐式类型转化？"></a>3-4. 为什么需要避免MySQL进行隐式类型转化？</h2><p>  因为MySQL进行隐式类型转化之后，可能会将索引字段类型转化成=号右边值的类型，导致使用不到索引，原因和避免在索引字段中使用函数是类似的。</p>
<h2 id="3-6-__u4E3A_u4EC0_u4E48_u4E0D_u5EFA_u8BAE_u4F7F_u7528SELECT_*_3F"><a href="#3-6-__u4E3A_u4EC0_u4E48_u4E0D_u5EFA_u8BAE_u4F7F_u7528SELECT_*_3F" class="headerlink" title="3-6. 为什么不建议使用SELECT *?"></a>3-6. 为什么不建议使用SELECT *?</h2><p>  增加很多不必要的消耗（cpu、io、内存、网络带宽）；增加了使用覆盖索引的可能性；当表结构发生改变时，前段也需要更新。</p>
<h2 id="3-13-__u5982_u4F55_u51CF_u5C11_u4E0E_u6570_u636E_u5E93_u7684_u4EA4_u4E92_u6B21_u6570_uFF1F"><a href="#3-13-__u5982_u4F55_u51CF_u5C11_u4E0E_u6570_u636E_u5E93_u7684_u4EA4_u4E92_u6B21_u6570_uFF1F" class="headerlink" title="3-13. 如何减少与数据库的交互次数？"></a>3-13. 如何减少与数据库的交互次数？</h2><p>  使用下面的语句来减少和db的交互次数：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">INSERT</span> ... <span class="keyword">ON</span> <span class="keyword">DUPLICATE</span> <span class="keyword">KEY</span> <span class="keyword">UPDATE</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">REPLACE</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">IGNORE</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">values</span>(),()如何结合使用多个纬度进行散表散库？</span></span><br></pre></td></tr></table></figure>
<p>  例如微博message，先按照crc32(message_id)将message散到16个库中，然后针对每个库中的表，一天生成一张新表。</p>
<h2 id="3-14-__u4E3A_u4EC0_u4E48_u4E0D_u80FD_u4F7F_u7528ORDER_BY_rand_28_29_uFF1F"><a href="#3-14-__u4E3A_u4EC0_u4E48_u4E0D_u80FD_u4F7F_u7528ORDER_BY_rand_28_29_uFF1F" class="headerlink" title="3-14. 为什么不能使用ORDER BY rand()？"></a>3-14. 为什么不能使用ORDER BY rand()？</h2><p>  因为ORDER BY rand()会将数据从磁盘中读取，进行排序，会消耗大量的IO和CPU，可以在程序中获取一个rand值，然后通过在从数据库中获取对应的值。</p>
<h2 id="3-15-_MySQL_u4E2D_u5982_u4F55_u8FDB_u884C_u5206_u9875_uFF1F"><a href="#3-15-_MySQL_u4E2D_u5982_u4F55_u8FDB_u884C_u5206_u9875_uFF1F" class="headerlink" title="3-15. MySQL中如何进行分页？"></a>3-15. MySQL中如何进行分页？</h2><p>  假如有类似下面分页语句：</p>
<p> <code>SELECT * FROM table ORDER BY TIME DESC LIMIT 10000,10;</code></p>
<p> 这种分页方式会导致大量的io，因为MySQL使用的是提前读取策略。</p>
<p> 推荐分页方式：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> <span class="keyword">TIME</span>&lt;last_TIME <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">TIME</span> <span class="keyword">DESC</span> <span class="keyword">LIMIT</span> <span class="number">10.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">inner</span> <span class="keyword">JOIN</span>(<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">TIME</span> <span class="keyword">LIMIT</span> <span class="number">10000</span>,<span class="number">10</span>) <span class="keyword">as</span> <span class="keyword">t</span> <span class="keyword">USING</span>(<span class="keyword">id</span>)</span></span><br></pre></td></tr></table></figure>
<h2 id="3-17-_u4E3A_u4EC0_u4E48_u907F_u514D_u4F7F_u7528_u590D_u6742_u7684SQL_uFF1F"><a href="#3-17-_u4E3A_u4EC0_u4E48_u907F_u514D_u4F7F_u7528_u590D_u6742_u7684SQL_uFF1F" class="headerlink" title="3-17.为什么避免使用复杂的SQL？"></a>3-17.为什么避免使用复杂的SQL？</h2><p>  拒绝使用复杂的SQL，将大的SQL拆分成多条简单SQL分步执行。原因：简单的SQL容易使用到MySQL的query cache；减少锁表时间特别是MyISAM；可以使用多核cpu。</p>
<h2 id="2-_InnoDB_u5B58_u50A8_u5F15_u64CE_u4E3A_u4EC0_u4E48_u907F_u514D_u4F7F_u7528COUNT_28*_29_3F"><a href="#2-_InnoDB_u5B58_u50A8_u5F15_u64CE_u4E3A_u4EC0_u4E48_u907F_u514D_u4F7F_u7528COUNT_28*_29_3F" class="headerlink" title="2. InnoDB存储引擎为什么避免使用COUNT(*)?"></a>2. InnoDB存储引擎为什么避免使用COUNT(*)?</h2><p>  InnoDB表避免使用COUNT(*)操作，计数统计实时要求较强可以使用memcache或者redis，非实时统计可以使用单独统计表，定时更新。</p>
<blockquote>
<p>来自：<a href="http://www.phpboke.com/mysql-fuifan.html" target="_blank" rel="external">http://www.phpboke.com/mysql-fuifan.html</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="u4E00_u3001__u8868_u8BBE_u8BA1"><a href="#u4E00_u3001__u8868_u8BBE_u8BA1" class="headerlink" title="一、 表设计"></a>一、 表设计</h1><p>  库名、表]]>
    </summary>
    
      <category term="Database" scheme="http://git.seay.me/tags/Database/"/>
    
      <category term="MySQL" scheme="http://git.seay.me/tags/MySQL/"/>
    
      <category term="数据库" scheme="http://git.seay.me/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="Database" scheme="http://git.seay.me/categories/Database/"/>
    
      <category term="MySQL" scheme="http://git.seay.me/categories/Database/MySQL/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Ubuntu(Shell)命令行下连接到无线网络-使用wpa-cli命令]]></title>
    <link href="http://git.seay.me/post/2016-01-17-Ubuntu-Shell-WiFi-Setting.html"/>
    <id>http://git.seay.me/post/2016-01-17-Ubuntu-Shell-WiFi-Setting.html</id>
    <published>2016-01-17T11:16:20.000Z</published>
    <updated>2016-01-19T09:41:19.490Z</updated>
    <content type="html"><![CDATA[<h1 id="u60C5_u666F_u8BF4_u660E"><a href="#u60C5_u666F_u8BF4_u660E" class="headerlink" title="情景说明"></a>情景说明</h1><blockquote>
<p>自己买了个<code>Raspberry Pi 2</code>的板子，没有显示器，想利用无线连接通过<code>SSH</code>连接。无奈之下才上网查了下，发现可以利用<code>shell</code>命令设置无线连接，于是，就有了以下的内容。</p>
</blockquote>
<h1 id="u52A8_u624B_u5B9E_u65BD"><a href="#u52A8_u624B_u5B9E_u65BD" class="headerlink" title="动手实施"></a>动手实施</h1><h2 id="u6B65_u9AA4"><a href="#u6B65_u9AA4" class="headerlink" title="步骤"></a>步骤</h2><ol>
<li><p>在<code>shell</code>中输入<code>wpa_cli</code>命令，进入交互，然后输入以下信息(注：#为注释)</p>
</li>
<li><p>设置相关信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_network #&#25191;&#34892;&#21518;&#20250;&#36820;&#22238;&#19968;&#20010;&#25968;&#23383;&#65288;&#19968;&#33324;&#26159;0&#65289;&#10;#network_id&#20026;&#26080;&#32447;&#32593;&#30340;ID&#65292;&#33258;&#24049;&#21462;&#21517;&#10;set_network [network_id] ssid &#39;&#26080;&#32447;&#21517;&#31216;&#39; #&#26681;&#25454;&#20320;&#30340;&#32593;&#32476;&#29615;&#22659;&#22635;&#20889;&#10;set_network [network_id] psk &#39;&#26080;&#32447;&#23494;&#30721;&#39; #&#26080;&#32447;&#23494;&#30721;&#10;enable_network [network_id] #&#21551;&#29992;&#32593;&#32476;&#65292;&#25104;&#21151;&#21518;&#20250;&#36820;&#22238; CONNECT TO XXXX&#30340;&#20449;&#24687;</span><br></pre></td></tr></table></figure>
</li>
<li><p>退出交互模式</p>
<p>输入<code>q</code>退出交互模式。</p>
</li>
<li><p>连接网络</p>
<p>使用 <code>dhclient wlan0</code> 命令获取网络地址。</p>
</li>
</ol>
<h1 id="u793A_u4F8B"><a href="#u793A_u4F8B" class="headerlink" title="示例"></a>示例</h1>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:~$ ifconfig #&#26597;&#30475;&#26080;&#32447;&#32593;&#21345;&#21517;&#31216;&#65292;&#20551;&#23450;&#20026;nxthswrw234&#10;root@ubuntu:~$ wpa_cli&#10;add_network&#10;set_network NETID ssid &#39;MyWiFi&#39;&#10;set_network NETID psk &#39;12345678&#39;&#10;enable_network NETID&#10;q&#10;root@ubuntu:~$ dhclient nxthswrw234 #nxthswrw234&#20026;&#26080;&#32447;&#32593;&#21345;&#21517;&#31216;</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="u60C5_u666F_u8BF4_u660E"><a href="#u60C5_u666F_u8BF4_u660E" class="headerlink" title="情景说明"></a>情景说明</h1><blockquote>
<p>自己买了个<code>]]>
    </summary>
    
      <category term="Raspberry Pi 2" scheme="http://git.seay.me/tags/Raspberry-Pi-2/"/>
    
      <category term="Ubuntu" scheme="http://git.seay.me/tags/Ubuntu/"/>
    
      <category term="树莓派" scheme="http://git.seay.me/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="Ubuntu" scheme="http://git.seay.me/categories/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[树莓派(Raspberry Pi2)Windows IoT入门]]></title>
    <link href="http://git.seay.me/post/2016-01-14-Windows-IoT-Get-Started-For-Raspberry-Pi2.html"/>
    <id>http://git.seay.me/post/2016-01-14-Windows-IoT-Get-Started-For-Raspberry-Pi2.html</id>
    <published>2016-01-14T15:32:55.000Z</published>
    <updated>2016-01-19T09:41:09.923Z</updated>
    <content type="html"><![CDATA[<h2 id="u8BBE_u7F6E_u7535_u8111"><a href="#u8BBE_u7F6E_u7535_u8111" class="headerlink" title="设置电脑"></a><a href="http://ms-iot.github.io/content/zh-CN/win10/SetupPCRPI.htm" target="_blank" rel="external">设置电脑</a></h2><h3 id="u5728_u7535_u8111_u4E0A_u8BBE_u7F6E_Visual_Studio_2015"><a href="#u5728_u7535_u8111_u4E0A_u8BBE_u7F6E_Visual_Studio_2015" class="headerlink" title="在电脑上设置 Visual Studio 2015"></a>在电脑上设置 Visual Studio 2015</h3><p>若要设置 Windows 10 IoT 核心版开发电脑，首先需要安装以下内容：</p>
<ol>
<li><p><strong>请确保运行的是 Windows 10（版本 10240）的公共版本或更高版本</strong>。可从<a href="http://www.microsoft.com/zh-CN/software-download/windows10" target="_blank" rel="external">此处</a>升级。如果已经运行 Windows 10，可通过单击“开始”按钮、键入“winver”并点击 Enter，查找当前版本号。</p>
</li>
<li><p>在<a href="http://go.microsoft.com/fwlink/?LinkID=534599" target="_blank" rel="external">此处</a><strong>安装</strong> Visual Studio Community 2015。可从<a href="https://www.visualstudio.com/vs-2015-product-editions" target="_blank" rel="external">此处</a>下载 Visual Studio <code>Professional 2015</code> 和 Visual Studio <code>Enterprise</code> 2015。</p>
<p> <strong>注意：</strong> 如果选择安装不同版本的 VS 2015，请确保执行“自定义”安装，并依次选中“通用 Windows 应用开发工具”-&gt;“工具和 Windows SDK”复选框。</p>
</li>
<li><p>通过依次选择“帮助”&gt;“关于 Microsoft Visual Studio”<strong>验证</strong> Visual Studio <strong>安装</strong>。“Visual Studio”的所需版本是 <code>14.0.23107.0 D14Rel</code>。“用于通用 Windows 应用的 Visual Studio 工具”的所需版本是 <code>14.0.23121.00 D14OOB</code>。</p>
</li>
<li><p>确保已按照<a href="https://msdn.microsoft.com/library/windows/apps/xaml/dn706236.aspx" target="_blank" rel="external">这些说明</a>启用了<strong>开发人员模式</strong>。</p>
</li>
</ol>
<h2 id="u8BBE_u7F6E_u4F60_u7684_u8BBE_u5907"><a href="#u8BBE_u7F6E_u4F60_u7684_u8BBE_u5907" class="headerlink" title="设置你的设备"></a><a href="http://ms-iot.github.io/content/zh-CN/win10/SetupRPI.htm" target="_blank" rel="external">设置你的设备</a></h2><h3 id="u9700_u8981_u5177_u5907_u7684_u6761_u4EF6"><a href="#u9700_u8981_u5177_u5907_u7684_u6761_u4EF6" class="headerlink" title="需要具备的条件"></a>需要具备的条件</h3><ol>
<li><p><strong>运行 Windows 10 的电脑</strong>（在上一步中已准备就绪）</p>
</li>
<li><p><strong>Raspberry Pi 2</strong></p>
</li>
<li><p><strong>5V 微型 USB 电源</strong> - 使用至少 1.0A 电流。如果计划使用多个高耗电 USB 外围设备，请改用电流较高的电源 (&gt;2.0A)。</p>
</li>
<li><p><strong>8GB 微型 SD 卡</strong> - 类 10 或更高。（我们建议使用<a href="http://www.amazon.com/gp/product/B00IVPU786" target="_blank" rel="external">这个</a>或<a href="http://www.amazon.com/SanDisk-Ultra-Micro-SDHC-16GB/dp/9966573445" target="_blank" rel="external">这个</a>）</p>
</li>
<li><p><strong>HDMI 电缆和监视器</strong></p>
</li>
<li><p><strong>以太网电缆</strong></p>
</li>
<li><p><strong>微型 SD 卡读卡器</strong>（因为大多数内部 SD 卡读卡器均会出现问题，所以我们建议使用外部 USB 卡读卡器，例如<a href="http://www.amazon.com/dp/B009D79VH4" target="_blank" rel="external">这个</a>或<a href="http://www.amazon.com/dp/B0096FB5CW" target="_blank" rel="external">这个</a>）</p>
</li>
</ol>
<h3 id="u5B89_u88C5_Windows_10_IoT__u6838_u5FC3_u7248_u5DE5_u5177"><a href="#u5B89_u88C5_Windows_10_IoT__u6838_u5FC3_u7248_u5DE5_u5177" class="headerlink" title="安装 Windows 10 IoT 核心版工具"></a>安装 Windows 10 IoT 核心版工具</h3><ol>
<li><p>从 Microsoft 下载中心<a href="http://go.microsoft.com/fwlink/?LinkId=616847" target="_blank" rel="external">下载</a>用于 Raspberry Pi 2 的 ISO。</p>
</li>
<li><p>将 ISO 保存到本地文件夹</p>
<p> <img src="http://ms-iot.github.io/content/images/SetupRPI/Iso.PNG" alt=""></p>
</li>
<li><p>双击 ISO（IoT 核心版 RPi.iso）。它将自动将其本身作为虚拟驱动器进行装载，以便你可以访问内容。</p>
<p> <img src="http://ms-iot.github.io/content/images/SetupRPI/MSI.PNG" alt=""></p>
</li>
<li><p>安装 Windows_10_IoT_Core_RPi2.msi。安装完成后，flash.ffu 将位于 C:\Program Files (x86)\Microsoft IoT\FFU\RaspberryPi2</p>
<p> <img src="http://ms-iot.github.io/content/images/SetupRPI/rpiffu.PNG" alt=""></p>
</li>
<li><p>完成后将弹出虚拟 CD</p>
</li>
</ol>
<h3 id="u5C06_Windows_10_IoT_Core_Insider_Preview__u6620_u50CF_u653E_u7F6E_u5728_SD__u5361_u4E0A"><a href="#u5C06_Windows_10_IoT_Core_Insider_Preview__u6620_u50CF_u653E_u7F6E_u5728_SD__u5361_u4E0A" class="headerlink" title="将 Windows 10 IoT Core Insider Preview 映像放置在 SD 卡上"></a>将 Windows 10 IoT Core Insider Preview 映像放置在 SD 卡上</h3><ol>
<li><p>将微型 SD 卡插入 SD 卡读卡器。</p>
</li>
<li><p>使用 IoTCoreImageHelper.exe 切换 SD 卡。从“开始”菜单搜索“WindowsIoT”，并选择快捷方式“WindowsIoTImageHelper”</p>
<p> <img src="http://ms-iot.github.io/content/images/ImagerHelperSearch.PNG" alt=""></p>
</li>
<li><p>该工具将按照显示方式枚举设备。选择希望切换的 SD 卡，然后提供 FFU 的位置并切换映像。<br> <img src="http://ms-iot.github.io/content/images/SetupRPI/ImageHelper.PNG" alt=""></p>
</li>
<li><p>单击任务栏中的“安全删除硬件”图标，然后选择你的 USB SD 读卡器以将其从系统中安全删除。如果未正确执行此操作，可能导致映像损坏。</p>
<p><strong>注意</strong>： 如果希望在使用完 Windows 10 IoT 核心版后将其从 SD 卡中删除，请参阅标题为<strong>如何从 SD 卡中删除 Windows 10 IoT 核心版？</strong>的<a href="http://ms-iot.github.io/content/zh-CN/Faqs.htm" target="_blank" rel="external">常见问题</a>部分。</p>
<p><strong>注意</strong>： IoTCoreImageHelper.exe 是推荐用来切换 SD 卡的工具。但是，说明可用于直接使用 <a href="http://ms-iot.github.io/content/zh-CN/win10/samples/DISM.htm" target="_blank" rel="external">DISM 命令</a>行工具</p>
</li>
</ol>
<h3 id="u8FDE_u63A5_u7535_u8DEF_u677F"><a href="#u8FDE_u63A5_u7535_u8DEF_u677F" class="headerlink" title="连接电路板"></a>连接电路板</h3><ol>
<li><p>插入已准备的<strong>微型 SD 卡</strong>（插槽在如下所示的电路板的另一侧）。</p>
</li>
<li><p><strong>将网络电缆</strong>从本地网络连接到电路板上的以太网端口。请确保开发电脑在同一网络上。</p>
<p><strong>注意</strong>： 如果没有本地有线网络，请参阅<a href="http://ms-iot.github.io/content/zh-CN/win10/ConnectToDevice.htm" target="_blank" rel="external">此处</a>获取其他连接选项。</p>
</li>
<li><p><strong>将 HDMI 监视器连接到</strong>电路板上的 HDMI 端口。</p>
</li>
<li><p><strong>将电源连接到</strong>开发板上的微型 USB 端口。</p>
<p> <img src="http://ms-iot.github.io/content/images/rpi2.png" alt=""></p>
</li>
</ol>
<h3 id="u542F_u52A8_Windows_10_IoT__u6838_u5FC3_u7248"><a href="#u542F_u52A8_Windows_10_IoT__u6838_u5FC3_u7248" class="headerlink" title="启动 Windows 10 IoT 核心版"></a>启动 Windows 10 IoT 核心版</h3><ol>
<li><p>连接电源后，Windows 10 IoT 核心版将自动启动。这可能需要几分钟时间。</p>
</li>
<li><p>启动设备后，DefaultApp 将启动并显示 RPi2 的 IP 地址。</p>
<p> <img src="http://ms-iot.github.io/content/images/DefaultAppRpi2.png" alt=""></p>
</li>
<li><p>遵循<a href="http://ms-iot.github.io/content/zh-CN/win10/samples/PowerShell.htm" target="_blank" rel="external">此处的 PowerShell 文档</a>，使用 PowerShell 连接到正在运行的设备。也可按照<a href="http://ms-iot.github.io/content/zh-CN/win10/samples/SSH.htm" target="_blank" rel="external">此处</a>的说明使用 SSH 连接到设备。</p>
</li>
<li><p><strong>强烈推荐</strong>更新管理员帐户的默认密码。若要执行此操作，请在 PowerShell 连接中发出以下命令：</p>
<p>使用强密码替换 <code>[new password]</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user Administrator [new password]</span><br></pre></td></tr></table></figure>
<p>此操作完成后，将需要使用 psSession 和新凭据重新建立当前会话。</p>
</li>
</ol>
<h3 id="u5176_u4ED6_u8D44_u6E90"><a href="#u5176_u4ED6_u8D44_u6E90" class="headerlink" title="其他资源"></a>其他资源</h3><ul>
<li><a href="http://ms-iot.github.io/content/zh-CN/win10/SupportedInterfaces.htm" target="_blank" rel="external">受支持的外围接口和设备</a></li>
</ul>
<h2 id="u5F00_u53D1"><a href="#u5F00_u53D1" class="headerlink" title="开发"></a><a href="http://ms-iot.github.io/content/zh-CN/win10/samples/Blinky.htm" target="_blank" rel="external">开发</a></h2><h3 id="Blinky__u793A_u4F8B"><a href="#Blinky__u793A_u4F8B" class="headerlink" title="Blinky 示例"></a>Blinky 示例</h3><p>我们将创建一个简单的 LED 闪烁应用并将 LED 连接到你的 Windows 10 IoT Core 设备。</p>
<p>这是一个有外设的示例。若要更好地了解什么是有外设的模式以及如何将你的设备配置为有外设，请按照<a href="http://ms-iot.github.io/content/zh-CN/win10/HeadlessMode.htm" target="_blank" rel="external">此处</a>的说明操作。</p>
<p>另外，还请注意 GPIO API 仅在 Windows 10 IoT Core 上可用，因此该示例无法在你的桌面上运行。</p>
<p>在 Visual Studio 中加载项目</p>
<p>你可以通过在<a href="https://github.com/ms-iot/samples/archive/develop.zip" target="_blank" rel="external">此处</a>下载所有示例的 zip 并导航到 <code>samples-develop\Blinky</code>，查找此示例的源代码。示例代码可采用 C++ 或 C# 提供，但此处的文档仅详细介绍了 C# 变体。在磁盘上创建文件夹的副本，然后从 Visual Studio 中打开项目。</p>
<h4 id="u5C06_LED__u8FDE_u63A5_u5230_u4F60_u7684_Windows_IoT__u8BBE_u5907"><a href="#u5C06_LED__u8FDE_u63A5_u5230_u4F60_u7684_Windows_IoT__u8BBE_u5907" class="headerlink" title="将 LED 连接到你的 Windows IoT 设备"></a>将 LED 连接到你的 Windows IoT 设备</h4><p>你将会需要一些组件：</p>
<ul>
<li><p>一个 LED（你喜欢的任意一种颜色）</p>
</li>
<li><p>一个 220 Ω 电阻器</p>
</li>
<li><p>一块试验板和几根连接线</p>
<p>  <img src="http://ms-iot.github.io/content/images/Blinky/components.png" alt=""></p>
</li>
</ul>
<h4 id="u9002_u7528_u4E8E_Raspberry_Pi_2__28RPi2_29"><a href="#u9002_u7528_u4E8E_Raspberry_Pi_2__28RPi2_29" class="headerlink" title="适用于 Raspberry Pi 2 (RPi2)"></a>适用于 Raspberry Pi 2 (RPi2)</h4><p>我们要将 LED 的一端连接到 RPi2 上的 GPIO 5（JP3 扩展头上的引脚 29），将另一端连接到电阻器，并将电阻器连接到 RPi2 上的 3.3 伏电源。请注意 LED 的正负极非常重要。请确保将较短的腿 (-) 连接到 GPIO 5 并将较长的腿 (+) 连接到电阻器，否则它不会点亮。</p>
<p>下面是 RPi2 的引出线：</p>
<p><img src="http://ms-iot.github.io/content/images/PinMappings/RP2_Pinout.png" alt=""></p>
<p><em>使用 <a href="http://fritzing.org/" target="_blank" rel="external">Fritzing</a> 制作的图像</em></p>
<p>下面是使用电路组装的试验板可能样子的一个示例：</p>
<p><img src="http://ms-iot.github.io/content/images/Blinky/breadboard_assembled_rpi2.png" alt=""></p>
<p><em>使用 <a href="http://fritzing.org/" target="_blank" rel="external">Fritzing</a> 制作的图像</em></p>
<h4 id="u9002_u7528_u4E8E_MinnowBoard_Max__28MBM_29"><a href="#u9002_u7528_u4E8E_MinnowBoard_Max__28MBM_29" class="headerlink" title="适用于 MinnowBoard Max (MBM)"></a>适用于 MinnowBoard Max (MBM)</h4><p>我们要将 LED 的一端连接到 MBM 上的 GPIO 5（JP1 扩展头上的引脚 18），将另一端连接到电阻器，并将电阻器连接到 MBM 上的 3.3 伏电源。请注意 LED 的正负极非常重要。请确保将较短的腿 (-) 连接到 GPIO 5 并将较长的腿 (+) 连接到电阻器，否则它不会点亮。</p>
<p>以下是 MBM 上的 JP1 连接器：</p>
<p><img src="http://ms-iot.github.io/content/images/PinMappings/MBM_Pinout.png" alt=""></p>
<p><em>使用 <a href="http://fritzing.org/" target="_blank" rel="external">Fritzing</a> 制作的图像</em></p>
<p>下面是使用电路组装的试验板可能样子的一个示例：</p>
<p><img src="http://ms-iot.github.io/content/images/Blinky/breadboard_assembled.png" alt=""></p>
<p><em>使用 <a href="http://fritzing.org/" target="_blank" rel="external">Fritzing</a> 制作的图像</em></p>
<h4 id="u90E8_u7F72_u4F60_u7684_u5E94_u7528"><a href="#u90E8_u7F72_u4F60_u7684_u5E94_u7528" class="headerlink" title="部署你的应用"></a>部署你的应用</h4><ol>
<li><p>应用程序在 Visual Studio 中打开后，在工具栏下拉列表中设置体系结构。如果针对 MinnowBoard Max 进行生成，请选择 <code>x86</code>。如果针对 Raspberry Pi 2 进行生成，请选择 <code>ARM</code>。</p>
</li>
<li><p>接下来，在 Visual Studio 工具栏中，单击<code>Local Machine</code>下拉列表并选择 <code>Remote Machine</code></p>
<p> <img src="http://ms-iot.github.io/content/images/AppDeployment/cs-remote-machine-debugging.png" alt=""></p>
</li>
<li><p>此时，Visual Studio 将显示“远程连接”对话框。如果以前使用过 <a href="http://ms-iot.github.io/content/zh-CN/win10/samples/PowerShell.htm" target="_blank" rel="external">PowerShell</a> 设置设备的唯一名称，可在此处输入该名称（在此示例中，我们使用的是 my-device）。否则，使用 Windows IoT 核心版设备的 IP 地址。输入设备名称/IP 后，选择 <code>None</code> 进行 Windows 身份验证，然后单击“选择”。</p>
<p> <img src="http://ms-iot.github.io/content/images/AppDeployment/cs-remote-connections.PNG" alt=""></p>
</li>
<li><p>可通过导航到项目属性（在解决方案资源管理器中选择“属性”）并在左侧选择 Debug 选项卡来验证或修改这些值：</p>
<p> <img src="http://ms-iot.github.io/content/images/AppDeployment/cs-debug-project-properties.PNG" alt="项目属性调试选项卡"></p>
</li>
</ol>
<p>完成所有设置后，你应可以在 Visual Studio 中按 F5。Blinky 应用将会部署并在 Windows IoT 设备上启动，此时你应会看到 LED 与屏幕上的模拟图像同步闪烁。</p>
<p><img src="http://ms-iot.github.io/content/images/Blinky/blinky-screenshot.png" alt=""></p>
<p>恭喜你！ 你已控制了 Windows IoT 设备上的一个 GPIO 引脚！</p>
<h4 id="u6211_u4EEC_u6765_u770B_u770B_u4EE3_u7801"><a href="#u6211_u4EEC_u6765_u770B_u770B_u4EE3_u7801" class="headerlink" title="我们来看看代码"></a>我们来看看代码</h4><p>此示例的代码相当简单。我们使用了一个计时器，每当调用“Tick”事件时，都会切换 LED 的状态。</p>
<h5 id="u8BA1_u65F6_u5668_u4EE3_u7801"><a href="#u8BA1_u65F6_u5668_u4EE3_u7801" class="headerlink" title="计时器代码"></a>计时器代码</h5><p>下面说明如何使用 C# 语言设置计时器：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MainPage</span>(<span class="params"></span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.timer = <span class="keyword">new</span> DispatcherTimer();</span><br><span class="line">    <span class="keyword">this</span>.timer.Interval = TimeSpan.FromMilliseconds(<span class="number">500</span>);</span><br><span class="line">    <span class="keyword">this</span>.timer.Tick += Timer_Tick;</span><br><span class="line">    <span class="keyword">this</span>.timer.Start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Timer_Tick</span>(<span class="params"><span class="keyword">object</span> sender, <span class="keyword">object</span> e</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    FlipLED();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="u521D_u59CB_u5316_GPIO__u5F15_u811A"><a href="#u521D_u59CB_u5316_GPIO__u5F15_u811A" class="headerlink" title="初始化 GPIO 引脚"></a>初始化 GPIO 引脚</h5><p>为了驱动 GPIO 引脚，首先我们需要对其进行初始化。以下是 C# 代码（请注意我们如何在 Windows.Devices.Gpio 命名空间中利用新 WinRT 类）：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Windows.Devices.Gpio;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">InitGPIO</span>(<span class="params"></span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> gpio = GpioController.GetDefault();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Show an error if there is no GPIO controller</span></span><br><span class="line">    <span class="keyword">if</span> (gpio == <span class="keyword">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        pin = <span class="keyword">null</span>;</span><br><span class="line">        GpioStatus.Text = <span class="string">"There is no GPIO controller on this device."</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pin = gpio.OpenPin(LED_PIN);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Show an error if the pin wasn't initialized properly</span></span><br><span class="line">    <span class="keyword">if</span> (pin == <span class="keyword">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        GpioStatus.Text = <span class="string">"There were problems initializing the GPIO pin."</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pin.Write(GpioPinValue.High);</span><br><span class="line">    pin.SetDriveMode(GpioPinDriveMode.Output);</span><br><span class="line"></span><br><span class="line">    GpioStatus.Text = <span class="string">"GPIO pin initialized correctly."</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>让让我们稍稍细分一下此过程：</p>
<ul>
<li><p>首先，我们使用 <code>GpioController.GetDefault()</code> 获取 GPIO 控制器。</p>
</li>
<li><p>如果设备没有 GPIO 控制器，则此函数将返回 <code>null</code>。</p>
</li>
<li><p>然后，我们尝试通过使用 <code>LED_PIN</code> 值调用 <code>GpioController.OpenPin()</code> 来打开引脚。</p>
</li>
<li><p>获取 <code>pin</code> 后，我们会使用 <code>GpioPin.Write()</code> 函数将它设置为默认的关闭状态（高）。</p>
</li>
<li><p>我们还使用了 <code>GpioPin.SetDriveMode()</code> 函数将 <code>pin</code> 设置为以输出模式运行。</p>
</li>
</ul>
<h5 id="u4FEE_u6539_GPIO__u5F15_u811A_u7684_u72B6_u6001"><a href="#u4FEE_u6539_GPIO__u5F15_u811A_u7684_u72B6_u6001" class="headerlink" title="修改 GPIO 引脚的状态"></a>修改 GPIO 引脚的状态</h5><p>在具有<code>GpioOutputPin</code> 实例的访问权限后，没有必要再通过更改引脚状态来打开或关闭 LED。</p>
<p>若要打开 LED，只需将值 <code>GpioPinValue.Low</code> 写入引脚：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.pin.Write(GpioPinValue.Low);</span><br></pre></td></tr></table></figure>
<p>当然，写入 <code>GpioPinValue.High</code> 便会关闭 LED：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.pin.Write(GpioPinValue.High);</span><br></pre></td></tr></table></figure>
<p>记得我们已将 LED 的另一端连接到了 3.3 伏电源，因此，我们需要将引脚驱动到低位，使电流通过 LED。</p>
<blockquote>
<p>本文来源:<a href="http://ms-iot.github.io/content/zh-CN/GetStarted.htm" target="_blank" rel="external"><code>微软Windows IoT官网</code></a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="u8BBE_u7F6E_u7535_u8111"><a href="#u8BBE_u7F6E_u7535_u8111" class="headerlink" title="设置电脑"></a><a href="http://ms-iot.github.io/con]]>
    </summary>
    
      <category term="Raspberry Pi 2" scheme="http://git.seay.me/tags/Raspberry-Pi-2/"/>
    
      <category term="Windows IoT" scheme="http://git.seay.me/tags/Windows-IoT/"/>
    
      <category term="树莓派" scheme="http://git.seay.me/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="Raspberry Pi" scheme="http://git.seay.me/categories/Raspberry-Pi/"/>
    
      <category term="Windows IoT" scheme="http://git.seay.me/categories/Raspberry-Pi/Windows-IoT/"/>
    
  </entry>
  
</feed>
